GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s 			page 1


   1              		.file	"chheap.c"
   2              		.section	.text$_heap_init,"x"
   3              		.p2align 4,,15
   4              		.globl	__heap_init
   5              		.def	__heap_init;	.scl	2;	.type	32;	.endef
   6              	__heap_init:
   7              	LFB7:
   8              		.cfi_startproc
   9 0000 83EC1C   		subl	$28, %esp
  10              		.cfi_def_cfa_offset 32
  11 0003 C7042420 		movl	$_default_heap+32, (%esp)
  11      000000
  12 000a C7050000 		movl	$_chCoreAlloc, _default_heap
  12      00000000 
  12      0000
  13 0014 C7051000 		movl	$0, _default_heap+16
  13      00000000 
  13      0000
  14 001e C7051400 		movl	$0, _default_heap+20
  14      00000000 
  14      0000
  15 0028 E8000000 		call	_chMtxInit
  15      00
  16 002d 83C41C   		addl	$28, %esp
  17              		.cfi_def_cfa_offset 4
  18 0030 C3       		ret
  19              		.cfi_endproc
  20              	LFE7:
  21 0031 90909090 		.section .rdata,"dr"
  21      90909090 
  21      90909090 
  21      909090
  22              	LC0:
  23 0000 22636848 		.ascii "\"chHeapInit\"()\0"
  23      65617049 
  23      6E697422 
  23      282900
  24              		.section	.text$chHeapInit,"x"
  25              		.p2align 4,,15
  26              		.globl	_chHeapInit
  27              		.def	_chHeapInit;	.scl	2;	.type	32;	.endef
  28              	_chHeapInit:
  29              	LFB8:
  30              		.cfi_startproc
  31 0000 83EC1C   		subl	$28, %esp
  32              		.cfi_def_cfa_offset 32
  33 0003 89742414 		movl	%esi, 20(%esp)
  34              		.cfi_offset 6, -12
  35 0007 8B742424 		movl	36(%esp), %esi
  36 000b 895C2410 		movl	%ebx, 16(%esp)
  37              		.cfi_offset 3, -16
  38 000f 8B5C2420 		movl	32(%esp), %ebx
  39 0013 897C2418 		movl	%edi, 24(%esp)
  40              		.cfi_offset 7, -8
  41 0017 8B7C2428 		movl	40(%esp), %edi
  42 001b F7C60F00 		testl	$15, %esi
  42      0000
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s 			page 2


  43 0021 7508     		jne	L4
  44 0023 F7C70F00 		testl	$15, %edi
  44      0000
  45 0029 740C     		je	L5
  46              	L4:
  47 002b C7042400 		movl	$LC0, (%esp)
  47      000000
  48 0032 E8000000 		call	_chDbgPanic
  48      00
  49              	L5:
  50 0037 897310   		movl	%esi, 16(%ebx)
  51 003a 83EF10   		subl	$16, %edi
  52 003d C7431400 		movl	$0, 20(%ebx)
  52      000000
  53 0044 C7030000 		movl	$0, (%ebx)
  53      0000
  54 004a 83C320   		addl	$32, %ebx
  55 004d C7060000 		movl	$0, (%esi)
  55      0000
  56 0053 897E04   		movl	%edi, 4(%esi)
  57 0056 8B742414 		movl	20(%esp), %esi
  58 005a 895C2420 		movl	%ebx, 32(%esp)
  59 005e 8B7C2418 		movl	24(%esp), %edi
  60 0062 8B5C2410 		movl	16(%esp), %ebx
  61 0066 83C41C   		addl	$28, %esp
  62              		.cfi_restore 7
  63              		.cfi_restore 6
  64              		.cfi_restore 3
  65              		.cfi_def_cfa_offset 4
  66 0069 E9000000 		jmp	_chMtxInit
  66      00
  67              		.cfi_endproc
  68              	LFE8:
  69 006e 9090     		.section	.text$chHeapAlloc,"x"
  70              		.p2align 4,,15
  71              		.globl	_chHeapAlloc
  72              		.def	_chHeapAlloc;	.scl	2;	.type	32;	.endef
  73              	_chHeapAlloc:
  74              	LFB9:
  75              		.cfi_startproc
  76 0000 55       		pushl	%ebp
  77              		.cfi_def_cfa_offset 8
  78              		.cfi_offset 5, -8
  79 0001 B8000000 		movl	$_default_heap, %eax
  79      00
  80 0006 57       		pushl	%edi
  81              		.cfi_def_cfa_offset 12
  82              		.cfi_offset 7, -12
  83 0007 56       		pushl	%esi
  84              		.cfi_def_cfa_offset 16
  85              		.cfi_offset 6, -16
  86 0008 53       		pushl	%ebx
  87              		.cfi_def_cfa_offset 20
  88              		.cfi_offset 3, -20
  89 0009 83EC1C   		subl	$28, %esp
  90              		.cfi_def_cfa_offset 48
  91 000c 8B6C2430 		movl	48(%esp), %ebp
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s 			page 3


  92 0010 8B7C2434 		movl	52(%esp), %edi
  93 0014 85ED     		testl	%ebp, %ebp
  94 0016 0F44E8   		cmove	%eax, %ebp
  95 0019 83C70F   		addl	$15, %edi
  96 001c 8D4520   		leal	32(%ebp), %eax
  97 001f 83E7F0   		andl	$-16, %edi
  98 0022 890424   		movl	%eax, (%esp)
  99 0025 8D7510   		leal	16(%ebp), %esi
 100 0028 E8000000 		call	_chMtxLock
 100      00
 101 002d EB03     		jmp	L13
 102 002f 90       		.p2align 4,,7
 103              	L21:
 104 0030 89DE     		movl	%ebx, %esi
 105              	L13:
 106 0032 8B1E     		movl	(%esi), %ebx
 107 0034 85DB     		testl	%ebx, %ebx
 108 0036 743E     		je	L26
 109 0038 8B4304   		movl	4(%ebx), %eax
 110 003b 39C7     		cmpl	%eax, %edi
 111 003d 77F1     		ja	L21
 112 003f 8D5710   		leal	16(%edi), %edx
 113 0042 39C2     		cmpl	%eax, %edx
 114 0044 772A     		ja	L27
 115 0046 8B0B     		movl	(%ebx), %ecx
 116 0048 29F8     		subl	%edi, %eax
 117 004a 01DA     		addl	%ebx, %edx
 118 004c 83E810   		subl	$16, %eax
 119 004f 894204   		movl	%eax, 4(%edx)
 120 0052 897B04   		movl	%edi, 4(%ebx)
 121 0055 890A     		movl	%ecx, (%edx)
 122 0057 8916     		movl	%edx, (%esi)
 123              	L15:
 124 0059 892B     		movl	%ebp, (%ebx)
 125 005b E8000000 		call	_chMtxUnlock
 125      00
 126 0060 8D4310   		leal	16(%ebx), %eax
 127              	L16:
 128 0063 83C41C   		addl	$28, %esp
 129              		.cfi_remember_state
 130              		.cfi_def_cfa_offset 20
 131 0066 5B       		popl	%ebx
 132              		.cfi_restore 3
 133              		.cfi_def_cfa_offset 16
 134 0067 5E       		popl	%esi
 135              		.cfi_restore 6
 136              		.cfi_def_cfa_offset 12
 137 0068 5F       		popl	%edi
 138              		.cfi_restore 7
 139              		.cfi_def_cfa_offset 8
 140 0069 5D       		popl	%ebp
 141              		.cfi_restore 5
 142              		.cfi_def_cfa_offset 4
 143 006a C3       		ret
 144 006b 908D7426 		.p2align 4,,7
 144      00
 145              	L27:
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s 			page 4


 146              		.cfi_restore_state
 147 0070 8B03     		movl	(%ebx), %eax
 148 0072 8906     		movl	%eax, (%esi)
 149 0074 EBE3     		jmp	L15
 150              		.p2align 4,,7
 151              	L26:
 152 0076 E8000000 		call	_chMtxUnlock
 152      00
 153 007b 8B4500   		movl	0(%ebp), %eax
 154 007e 85C0     		testl	%eax, %eax
 155 0080 741C     		je	L19
 156 0082 8D5710   		leal	16(%edi), %edx
 157 0085 891424   		movl	%edx, (%esp)
 158 0088 FFD0     		call	*%eax
 159 008a 85C0     		testl	%eax, %eax
 160 008c 7410     		je	L19
 161 008e 8928     		movl	%ebp, (%eax)
 162 0090 897804   		movl	%edi, 4(%eax)
 163 0093 83C41C   		addl	$28, %esp
 164              		.cfi_remember_state
 165              		.cfi_def_cfa_offset 20
 166 0096 83C010   		addl	$16, %eax
 167 0099 5B       		popl	%ebx
 168              		.cfi_restore 3
 169              		.cfi_def_cfa_offset 16
 170 009a 5E       		popl	%esi
 171              		.cfi_restore 6
 172              		.cfi_def_cfa_offset 12
 173 009b 5F       		popl	%edi
 174              		.cfi_restore 7
 175              		.cfi_def_cfa_offset 8
 176 009c 5D       		popl	%ebp
 177              		.cfi_restore 5
 178              		.cfi_def_cfa_offset 4
 179 009d C3       		ret
 180              	L19:
 181              		.cfi_restore_state
 182 009e 31C0     		xorl	%eax, %eax
 183 00a0 EBC1     		jmp	L16
 184              		.cfi_endproc
 185              	LFE9:
 186 00a2 90909090 		.section .rdata,"dr"
 186      90909090 
 186      90909090 
 186      9090
 187              	LC1:
 188 000f 22636848 		.ascii "\"chHeapFree\"()\0"
 188      65617046 
 188      72656522 
 188      282900
 189              	LC2:
 190 001e 63684865 		.ascii "chHeapFree(), #1\0"
 190      61704672 
 190      65652829 
 190      2C202331 
 190      00
 191 002f 00       		.section	.text$chHeapFree,"x"
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s 			page 5


 192              		.p2align 4,,15
 193              		.globl	_chHeapFree
 194              		.def	_chHeapFree;	.scl	2;	.type	32;	.endef
 195              	_chHeapFree:
 196              	LFB10:
 197              		.cfi_startproc
 198 0000 55       		pushl	%ebp
 199              		.cfi_def_cfa_offset 8
 200              		.cfi_offset 5, -8
 201 0001 57       		pushl	%edi
 202              		.cfi_def_cfa_offset 12
 203              		.cfi_offset 7, -12
 204 0002 56       		pushl	%esi
 205              		.cfi_def_cfa_offset 16
 206              		.cfi_offset 6, -16
 207 0003 53       		pushl	%ebx
 208              		.cfi_def_cfa_offset 20
 209              		.cfi_offset 3, -20
 210 0004 83EC1C   		subl	$28, %esp
 211              		.cfi_def_cfa_offset 48
 212 0007 8B6C2430 		movl	48(%esp), %ebp
 213 000b 85ED     		testl	%ebp, %ebp
 214 000d 0F84AE00 		je	L42
 214      0000
 215              	L29:
 216 0013 8B45F0   		movl	-16(%ebp), %eax
 217 0016 8D75F0   		leal	-16(%ebp), %esi
 218 0019 8D7810   		leal	16(%eax), %edi
 219 001c 83C020   		addl	$32, %eax
 220 001f 890424   		movl	%eax, (%esp)
 221 0022 89FB     		movl	%edi, %ebx
 222 0024 E8000000 		call	_chMtxLock
 222      00
 223 0029 8DB42600 		.p2align 4,,7
 223      000000
 224              	L37:
 225 0030 39F3     		cmpl	%esi, %ebx
 226 0032 770B     		ja	L30
 227 0034 8B4304   		movl	4(%ebx), %eax
 228 0037 8D440310 		leal	16(%ebx,%eax), %eax
 229 003b 39C6     		cmpl	%eax, %esi
 230 003d 7241     		jb	L43
 231              	L30:
 232 003f 39FB     		cmpl	%edi, %ebx
 233 0041 8B03     		movl	(%ebx), %eax
 234 0043 7404     		je	L31
 235 0045 39F3     		cmpl	%esi, %ebx
 236 0047 7309     		jae	L34
 237              	L31:
 238 0049 85C0     		testl	%eax, %eax
 239              		.p2align 4,,3
 240 004b 7409     		je	L33
 241 004d 39C6     		cmpl	%eax, %esi
 242 004f 90       		.p2align 4,,5
 243 0050 7204     		jb	L33
 244              	L34:
 245 0052 89C3     		movl	%eax, %ebx
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s 			page 6


 246              		.p2align 4,,5
 247 0054 EBDA     		jmp	L37
 248              		.p2align 4,,7
 249              	L33:
 250 0056 8B55F4   		movl	-12(%ebp), %edx
 251 0059 8945F0   		movl	%eax, -16(%ebp)
 252 005c 8933     		movl	%esi, (%ebx)
 253 005e 8D441610 		leal	16(%esi,%edx), %eax
 254 0062 3B45F0   		cmpl	-16(%ebp), %eax
 255 0065 7427     		je	L44
 256 0067 8B4304   		movl	4(%ebx), %eax
 257 006a 8D540310 		leal	16(%ebx,%eax), %edx
 258 006e 39D6     		cmpl	%edx, %esi
 259 0070 7435     		je	L45
 260              	L36:
 261 0072 83C41C   		addl	$28, %esp
 262              		.cfi_remember_state
 263              		.cfi_def_cfa_offset 20
 264 0075 5B       		popl	%ebx
 265              		.cfi_restore 3
 266              		.cfi_def_cfa_offset 16
 267 0076 5E       		popl	%esi
 268              		.cfi_restore 6
 269              		.cfi_def_cfa_offset 12
 270 0077 5F       		popl	%edi
 271              		.cfi_restore 7
 272              		.cfi_def_cfa_offset 8
 273 0078 5D       		popl	%ebp
 274              		.cfi_restore 5
 275              		.cfi_def_cfa_offset 4
 276 0079 E9000000 		jmp	_chMtxUnlock
 276      00
 277 007e 6690     		.p2align 4,,7
 278              	L43:
 279              		.cfi_restore_state
 280 0080 C704241E 		movl	$LC2, (%esp)
 280      000000
 281 0087 E8000000 		call	_chDbgPanic
 281      00
 282 008c EBB1     		jmp	L30
 283              	L44:
 284 008e 035004   		addl	4(%eax), %edx
 285 0091 8B00     		movl	(%eax), %eax
 286 0093 83C210   		addl	$16, %edx
 287 0096 8955F4   		movl	%edx, -12(%ebp)
 288 0099 8945F0   		movl	%eax, -16(%ebp)
 289 009c 8B4304   		movl	4(%ebx), %eax
 290 009f 8D540310 		leal	16(%ebx,%eax), %edx
 291 00a3 39D6     		cmpl	%edx, %esi
 292 00a5 75CB     		jne	L36
 293              	L45:
 294 00a7 0345F4   		addl	-12(%ebp), %eax
 295 00aa 83C010   		addl	$16, %eax
 296 00ad 894304   		movl	%eax, 4(%ebx)
 297 00b0 8B45F0   		movl	-16(%ebp), %eax
 298 00b3 8903     		movl	%eax, (%ebx)
 299 00b5 83C41C   		addl	$28, %esp
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s 			page 7


 300              		.cfi_remember_state
 301              		.cfi_def_cfa_offset 20
 302 00b8 5B       		popl	%ebx
 303              		.cfi_restore 3
 304              		.cfi_def_cfa_offset 16
 305 00b9 5E       		popl	%esi
 306              		.cfi_restore 6
 307              		.cfi_def_cfa_offset 12
 308 00ba 5F       		popl	%edi
 309              		.cfi_restore 7
 310              		.cfi_def_cfa_offset 8
 311 00bb 5D       		popl	%ebp
 312              		.cfi_restore 5
 313              		.cfi_def_cfa_offset 4
 314 00bc E9000000 		jmp	_chMtxUnlock
 314      00
 315              	L42:
 316              		.cfi_restore_state
 317 00c1 C704240F 		movl	$LC1, (%esp)
 317      000000
 318 00c8 E8000000 		call	_chDbgPanic
 318      00
 319 00cd E941FFFF 		jmp	L29
 319      FF
 320              		.cfi_endproc
 321              	LFE10:
 322 00d2 90909090 		.section	.text$chHeapStatus,"x"
 322      90909090 
 322      90909090 
 322      9090
 323              		.p2align 4,,15
 324              		.globl	_chHeapStatus
 325              		.def	_chHeapStatus;	.scl	2;	.type	32;	.endef
 326              	_chHeapStatus:
 327              	LFB11:
 328              		.cfi_startproc
 329 0000 56       		pushl	%esi
 330              		.cfi_def_cfa_offset 8
 331              		.cfi_offset 6, -8
 332 0001 B8000000 		movl	$_default_heap, %eax
 332      00
 333 0006 53       		pushl	%ebx
 334              		.cfi_def_cfa_offset 12
 335              		.cfi_offset 3, -12
 336 0007 83EC14   		subl	$20, %esp
 337              		.cfi_def_cfa_offset 32
 338 000a 8B5C2420 		movl	32(%esp), %ebx
 339 000e 8B742424 		movl	36(%esp), %esi
 340 0012 85DB     		testl	%ebx, %ebx
 341 0014 0F44D8   		cmove	%eax, %ebx
 342 0017 8D4320   		leal	32(%ebx), %eax
 343 001a 890424   		movl	%eax, (%esp)
 344 001d E8000000 		call	_chMtxLock
 344      00
 345 0022 8B5310   		movl	16(%ebx), %edx
 346 0025 31C0     		xorl	%eax, %eax
 347 0027 31DB     		xorl	%ebx, %ebx
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s 			page 8


 348 0029 85D2     		testl	%edx, %edx
 349 002b 740F     		je	L48
 350 002d 8D7600   		.p2align 4,,7
 351              	L49:
 352 0030 034204   		addl	4(%edx), %eax
 353 0033 83C301   		addl	$1, %ebx
 354 0036 8B12     		movl	(%edx), %edx
 355 0038 85D2     		testl	%edx, %edx
 356 003a 75F4     		jne	L49
 357              	L48:
 358 003c 85F6     		testl	%esi, %esi
 359 003e 7402     		je	L50
 360 0040 8906     		movl	%eax, (%esi)
 361              	L50:
 362 0042 E8000000 		call	_chMtxUnlock
 362      00
 363 0047 83C414   		addl	$20, %esp
 364              		.cfi_def_cfa_offset 12
 365 004a 89D8     		movl	%ebx, %eax
 366 004c 5B       		popl	%ebx
 367              		.cfi_restore 3
 368              		.cfi_def_cfa_offset 8
 369 004d 5E       		popl	%esi
 370              		.cfi_restore 6
 371              		.cfi_def_cfa_offset 4
 372 004e C3       		ret
 373              		.cfi_endproc
 374              	LFE11:
 375 004f 90       		.section	.data$default_heap,"w"
 376              		.align 32
 377              	_default_heap:
 378 0000 00000000 		.space 48
 378      00000000 
 378      00000000 
 378      00000000 
 378      00000000 
 379              		.def	_chCoreAlloc;	.scl	2;	.type	32;	.endef
 380              		.def	_chMtxInit;	.scl	2;	.type	32;	.endef
 381              		.def	_chDbgPanic;	.scl	2;	.type	32;	.endef
 382              		.def	_chMtxLock;	.scl	2;	.type	32;	.endef
 383 0030 00000000 		.def	_chMtxUnlock;	.scl	2;	.type	32;	.endef
 383      00000000 
 383      00000000 
 383      00000000 
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s 			page 9


DEFINED SYMBOLS
                            *ABS*:00000000 chheap.c
/cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s:6      .text$_heap_init:00000000 __heap_init
/cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s:377    .data$default_heap:00000000 _default_heap
/cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s:28     .text$chHeapInit:00000000 _chHeapInit
/cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s:73     .text$chHeapAlloc:00000000 _chHeapAlloc
/cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s:195    .text$chHeapFree:00000000 _chHeapFree
/cygdrive/c/Users/pc/AppData/Local/Temp/cc7A4Ujv.s:326    .text$chHeapStatus:00000000 _chHeapStatus

UNDEFINED SYMBOLS
_chCoreAlloc
_chMtxInit
_chDbgPanic
_chMtxLock
_chMtxUnlock
