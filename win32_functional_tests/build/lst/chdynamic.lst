GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s 			page 1


   1              		.file	"chdynamic.c"
   2              		.section .rdata,"dr"
   3              	LC0:
   4 0000 63685468 		.ascii "chThdAddRef(), #1\0"
   4      64416464 
   4      52656628 
   4      292C2023 
   4      3100
   5              		.section	.text$chThdAddRef,"x"
   6              		.p2align 4,,15
   7              		.globl	_chThdAddRef
   8              		.def	_chThdAddRef;	.scl	2;	.type	32;	.endef
   9              	_chThdAddRef:
  10              	LFB7:
  11              		.cfi_startproc
  12 0000 53       		pushl	%ebx
  13              		.cfi_def_cfa_offset 8
  14              		.cfi_offset 3, -8
  15 0001 83EC18   		subl	$24, %esp
  16              		.cfi_def_cfa_offset 32
  17 0004 8B5C2420 		movl	32(%esp), %ebx
  18              	/APP
  19              	 # 54 "../firmware/chibios/os/kernel/src/chdynamic.c" 1
  20 0008 90       		nop
  21              	 # 0 "" 2
  22              	/NO_APP
  23 0009 E8000000 		call	_dbg_check_lock
  23      00
  24 000e 0FB6431E 		movzbl	30(%ebx), %eax
  25 0012 3CFF     		cmpb	$-1, %al
  26 0014 741A     		je	L5
  27              	L2:
  28 0016 83C001   		addl	$1, %eax
  29 0019 88431E   		movb	%al, 30(%ebx)
  30 001c E8000000 		call	_dbg_check_unlock
  30      00
  31              	/APP
  32              	 # 57 "../firmware/chibios/os/kernel/src/chdynamic.c" 1
  33 0021 90       		nop
  34              	 # 0 "" 2
  35              	/NO_APP
  36 0022 83C418   		addl	$24, %esp
  37              		.cfi_remember_state
  38              		.cfi_def_cfa_offset 8
  39 0025 89D8     		movl	%ebx, %eax
  40 0027 5B       		popl	%ebx
  41              		.cfi_restore 3
  42              		.cfi_def_cfa_offset 4
  43 0028 C3       		ret
  44 0029 8DB42600 		.p2align 4,,7
  44      000000
  45              	L5:
  46              		.cfi_restore_state
  47 0030 C7042400 		movl	$LC0, (%esp)
  47      000000
  48 0037 E8000000 		call	_chDbgPanic
  48      00
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s 			page 2


  49 003c 0FB6431E 		movzbl	30(%ebx), %eax
  50 0040 EBD4     		jmp	L2
  51              		.cfi_endproc
  52              	LFE7:
  53 0042 90909090 		.section .rdata,"dr"
  53      90909090 
  53      90909090 
  53      9090
  54              	LC1:
  55 0012 63685468 		.ascii "chThdRelease(), #1\0"
  55      6452656C 
  55      65617365 
  55      28292C20 
  55      233100
  56              		.section	.text$chThdRelease,"x"
  57              		.p2align 4,,15
  58              		.globl	_chThdRelease
  59              		.def	_chThdRelease;	.scl	2;	.type	32;	.endef
  60              	_chThdRelease:
  61              	LFB8:
  62              		.cfi_startproc
  63 0000 83EC1C   		subl	$28, %esp
  64              		.cfi_def_cfa_offset 32
  65 0003 895C2414 		movl	%ebx, 20(%esp)
  66              		.cfi_offset 3, -12
  67 0007 8B5C2420 		movl	32(%esp), %ebx
  68 000b 89742418 		movl	%esi, 24(%esp)
  69              		.cfi_offset 6, -8
  70              	/APP
  71              	 # 77 "../firmware/chibios/os/kernel/src/chdynamic.c" 1
  72 000f 90       		nop
  73              	 # 0 "" 2
  74              	/NO_APP
  75 0010 E8000000 		call	_dbg_check_lock
  75      00
  76 0015 0FB6431E 		movzbl	30(%ebx), %eax
  77 0019 84C0     		testb	%al, %al
  78 001b 7455     		je	L12
  79              	L7:
  80 001d 8D70FF   		leal	-1(%eax), %esi
  81 0020 89F0     		movl	%esi, %eax
  82 0022 88431E   		movb	%al, 30(%ebx)
  83 0025 E8000000 		call	_dbg_check_unlock
  83      00
  84              	/APP
  85              	 # 80 "../firmware/chibios/os/kernel/src/chdynamic.c" 1
  86 002a 90       		nop
  87              	 # 0 "" 2
  88              	/NO_APP
  89 002b 89F0     		movl	%esi, %eax
  90 002d 84C0     		testb	%al, %al
  91 002f 7506     		jne	L6
  92 0031 807B1C0E 		cmpb	$14, 28(%ebx)
  93 0035 740C     		je	L13
  94              	L6:
  95 0037 8B5C2414 		movl	20(%esp), %ebx
  96 003b 8B742418 		movl	24(%esp), %esi
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s 			page 3


  97 003f 83C41C   		addl	$28, %esp
  98              		.cfi_remember_state
  99              		.cfi_restore 6
 100              		.cfi_restore 3
 101              		.cfi_def_cfa_offset 4
 102 0042 C3       		ret
 103              		.p2align 4,,7
 104              	L13:
 105              		.cfi_restore_state
 106 0043 0FB6431D 		movzbl	29(%ebx), %eax
 107 0047 83E003   		andl	$3, %eax
 108 004a 3C01     		cmpb	$1, %al
 109 004c 7436     		je	L9
 110 004e 3C02     		cmpb	$2, %al
 111 0050 75E5     		jne	L6
 112 0052 8B4314   		movl	20(%ebx), %eax
 113 0055 8B5310   		movl	16(%ebx), %edx
 114 0058 895010   		movl	%edx, 16(%eax)
 115 005b 8B5310   		movl	16(%ebx), %edx
 116 005e 894214   		movl	%eax, 20(%edx)
 117 0061 895C2404 		movl	%ebx, 4(%esp)
 118 0065 8B4344   		movl	68(%ebx), %eax
 119 0068 890424   		movl	%eax, (%esp)
 120 006b E8000000 		call	_chPoolFree
 120      00
 121 0070 EBC5     		jmp	L6
 122              		.p2align 4,,7
 123              	L12:
 124 0072 C7042412 		movl	$LC1, (%esp)
 124      000000
 125 0079 E8000000 		call	_chDbgPanic
 125      00
 126 007e 0FB6431E 		movzbl	30(%ebx), %eax
 127 0082 EB99     		jmp	L7
 128              		.p2align 4,,7
 129              	L9:
 130 0084 8B4314   		movl	20(%ebx), %eax
 131 0087 8B5310   		movl	16(%ebx), %edx
 132 008a 8B742418 		movl	24(%esp), %esi
 133 008e 895010   		movl	%edx, 16(%eax)
 134 0091 8B5310   		movl	16(%ebx), %edx
 135 0094 894214   		movl	%eax, 20(%edx)
 136 0097 895C2420 		movl	%ebx, 32(%esp)
 137 009b 8B5C2414 		movl	20(%esp), %ebx
 138 009f 83C41C   		addl	$28, %esp
 139              		.cfi_restore 6
 140              		.cfi_restore 3
 141              		.cfi_def_cfa_offset 4
 142 00a2 E9000000 		jmp	_chHeapFree
 142      00
 143              		.cfi_endproc
 144              	LFE8:
 145 00a7 90909090 		.section	.text$chThdCreateFromHeap,"x"
 145      90909090 
 145      90
 146              		.p2align 4,,15
 147              		.globl	_chThdCreateFromHeap
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s 			page 4


 148              		.def	_chThdCreateFromHeap;	.scl	2;	.type	32;	.endef
 149              	_chThdCreateFromHeap:
 150              	LFB9:
 151              		.cfi_startproc
 152 0000 56       		pushl	%esi
 153              		.cfi_def_cfa_offset 8
 154              		.cfi_offset 6, -8
 155 0001 53       		pushl	%ebx
 156              		.cfi_def_cfa_offset 12
 157              		.cfi_offset 3, -12
 158 0002 83EC24   		subl	$36, %esp
 159              		.cfi_def_cfa_offset 48
 160 0005 8B5C2434 		movl	52(%esp), %ebx
 161 0009 8B442430 		movl	48(%esp), %eax
 162 000d 895C2404 		movl	%ebx, 4(%esp)
 163 0011 890424   		movl	%eax, (%esp)
 164 0014 E8000000 		call	_chHeapAlloc
 164      00
 165 0019 85C0     		testl	%eax, %eax
 166 001b 89C6     		movl	%eax, %esi
 167 001d 7451     		je	L16
 168              	/APP
 169              	 # 148 "../firmware/chibios/os/kernel/src/chdynamic.c" 1
 170 001f 90       		nop
 171              	 # 0 "" 2
 172              	/NO_APP
 173 0020 E8000000 		call	_dbg_check_lock
 173      00
 174 0025 8B442440 		movl	64(%esp), %eax
 175 0029 895C2404 		movl	%ebx, 4(%esp)
 176 002d 893424   		movl	%esi, (%esp)
 177 0030 89442410 		movl	%eax, 16(%esp)
 178 0034 8B44243C 		movl	60(%esp), %eax
 179 0038 8944240C 		movl	%eax, 12(%esp)
 180 003c 8B442438 		movl	56(%esp), %eax
 181 0040 89442408 		movl	%eax, 8(%esp)
 182 0044 E8000000 		call	_chThdCreateI
 182      00
 183 0049 C6401D01 		movb	$1, 29(%eax)
 184 004d 89C3     		movl	%eax, %ebx
 185 004f 890424   		movl	%eax, (%esp)
 186 0052 C7442404 		movl	$0, 4(%esp)
 186      00000000 
 187 005a E8000000 		call	_chSchWakeupS
 187      00
 188 005f E8000000 		call	_dbg_check_unlock
 188      00
 189              	/APP
 190              	 # 152 "../firmware/chibios/os/kernel/src/chdynamic.c" 1
 191 0064 90       		nop
 192              	 # 0 "" 2
 193              	/NO_APP
 194              	L15:
 195 0065 83C424   		addl	$36, %esp
 196              		.cfi_remember_state
 197              		.cfi_def_cfa_offset 12
 198 0068 89D8     		movl	%ebx, %eax
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s 			page 5


 199 006a 5B       		popl	%ebx
 200              		.cfi_restore 3
 201              		.cfi_def_cfa_offset 8
 202 006b 5E       		popl	%esi
 203              		.cfi_restore 6
 204              		.cfi_def_cfa_offset 4
 205 006c C3       		ret
 206 006d 8D7600   		.p2align 4,,7
 207              	L16:
 208              		.cfi_restore_state
 209 0070 31DB     		xorl	%ebx, %ebx
 210 0072 EBF1     		jmp	L15
 211              		.cfi_endproc
 212              	LFE9:
 213 0074 90909090 		.section .rdata,"dr"
 213      90909090 
 213      90909090 
 214              	LC2:
 215 0025 22636854 		.ascii "\"chThdCreateFromMemoryPool\"()\0"
 215      68644372 
 215      65617465 
 215      46726F6D 
 215      4D656D6F 
 216 0043 00       		.section	.text$chThdCreateFromMemoryPool,"x"
 217              		.p2align 4,,15
 218              		.globl	_chThdCreateFromMemoryPool
 219              		.def	_chThdCreateFromMemoryPool;	.scl	2;	.type	32;	.endef
 220              	_chThdCreateFromMemoryPool:
 221              	LFB10:
 222              		.cfi_startproc
 223 0000 56       		pushl	%esi
 224              		.cfi_def_cfa_offset 8
 225              		.cfi_offset 6, -8
 226 0001 53       		pushl	%ebx
 227              		.cfi_def_cfa_offset 12
 228              		.cfi_offset 3, -12
 229 0002 83EC24   		subl	$36, %esp
 230              		.cfi_def_cfa_offset 48
 231 0005 8B5C2430 		movl	48(%esp), %ebx
 232 0009 85DB     		testl	%ebx, %ebx
 233 000b 7463     		je	L23
 234              	L19:
 235 000d 891C24   		movl	%ebx, (%esp)
 236 0010 E8000000 		call	_chPoolAlloc
 236      00
 237 0015 85C0     		testl	%eax, %eax
 238 0017 89C6     		movl	%eax, %esi
 239 0019 7465     		je	L21
 240              	/APP
 241              	 # 199 "../firmware/chibios/os/kernel/src/chdynamic.c" 1
 242 001b 90       		nop
 243              	 # 0 "" 2
 244              	/NO_APP
 245 001c E8000000 		call	_dbg_check_lock
 245      00
 246 0021 8B44243C 		movl	60(%esp), %eax
 247 0025 89442410 		movl	%eax, 16(%esp)
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s 			page 6


 248 0029 8B442438 		movl	56(%esp), %eax
 249 002d 8944240C 		movl	%eax, 12(%esp)
 250 0031 8B442434 		movl	52(%esp), %eax
 251 0035 89442408 		movl	%eax, 8(%esp)
 252 0039 8B4304   		movl	4(%ebx), %eax
 253 003c 893424   		movl	%esi, (%esp)
 254 003f 89442404 		movl	%eax, 4(%esp)
 255 0043 E8000000 		call	_chThdCreateI
 255      00
 256 0048 C6401D02 		movb	$2, 29(%eax)
 257 004c 89C6     		movl	%eax, %esi
 258 004e 895844   		movl	%ebx, 68(%eax)
 259 0051 890424   		movl	%eax, (%esp)
 260 0054 C7442404 		movl	$0, 4(%esp)
 260      00000000 
 261 005c E8000000 		call	_chSchWakeupS
 261      00
 262 0061 E8000000 		call	_dbg_check_unlock
 262      00
 263              	/APP
 264              	 # 204 "../firmware/chibios/os/kernel/src/chdynamic.c" 1
 265 0066 90       		nop
 266              	 # 0 "" 2
 267              	/NO_APP
 268              	L20:
 269 0067 83C424   		addl	$36, %esp
 270              		.cfi_remember_state
 271              		.cfi_def_cfa_offset 12
 272 006a 89F0     		movl	%esi, %eax
 273 006c 5B       		popl	%ebx
 274              		.cfi_restore 3
 275              		.cfi_def_cfa_offset 8
 276 006d 5E       		popl	%esi
 277              		.cfi_restore 6
 278              		.cfi_def_cfa_offset 4
 279 006e C3       		ret
 280 006f 90       		.p2align 4,,7
 281              	L23:
 282              		.cfi_restore_state
 283 0070 C7042425 		movl	$LC2, (%esp)
 283      000000
 284 0077 E8000000 		call	_chDbgPanic
 284      00
 285 007c EB8F     		jmp	L19
 286 007e 6690     		.p2align 4,,7
 287              	L21:
 288 0080 31F6     		xorl	%esi, %esi
 289 0082 EBE3     		jmp	L20
 290              		.cfi_endproc
 291              	LFE10:
 292              		.def	_dbg_check_lock;	.scl	2;	.type	32;	.endef
 293              		.def	_dbg_check_unlock;	.scl	2;	.type	32;	.endef
 294              		.def	_chDbgPanic;	.scl	2;	.type	32;	.endef
 295              		.def	_chPoolFree;	.scl	2;	.type	32;	.endef
 296              		.def	_chHeapFree;	.scl	2;	.type	32;	.endef
 297              		.def	_chHeapAlloc;	.scl	2;	.type	32;	.endef
 298              		.def	_chThdCreateI;	.scl	2;	.type	32;	.endef
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s 			page 7


 299              		.def	_chSchWakeupS;	.scl	2;	.type	32;	.endef
 300 0084 90909090 		.def	_chPoolAlloc;	.scl	2;	.type	32;	.endef
 300      90909090 
 300      90909090 
GAS LISTING /cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 chdynamic.c
/cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s:9      .text$chThdAddRef:00000000 _chThdAddRef
/cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s:60     .text$chThdRelease:00000000 _chThdRelease
/cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s:149    .text$chThdCreateFromHeap:00000000 _chThdCreateFromHeap
/cygdrive/c/Users/pc/AppData/Local/Temp/cc67FUIq.s:220    .text$chThdCreateFromMemoryPool:00000000 _chThdCreateFromMemoryPool

UNDEFINED SYMBOLS
_dbg_check_lock
_dbg_check_unlock
_chDbgPanic
_chPoolFree
_chHeapFree
_chHeapAlloc
_chThdCreateI
_chSchWakeupS
_chPoolAlloc
